# Полноценное Веб-приложение

## Описание проекта

Данный проект представляет собой современное полноценное веб-приложение, разработанное с использованием передовых технологий. Приложение построено по принципу клиент-серверной архитектуры и состоит из двух основных частей:

### Фронтенд (Client)

- Разработан на React 19 с использованием TypeScript
- Использует современный стек технологий для создания отзывчивого и интерактивного пользовательского интерфейса
- Реализован с использованием компонентного подхода и современных практик разработки
- Использует Feature-Sliced Design для организации кода
- Включает систему управления пользователями и статьями
- Реализует статистику и аналитику контента

### Бэкенд (Server)

- Построен на Node.js с использованием Express
- Использует moongoose в качестве базы данных
- Реализует RESTful API для взаимпшкодействия с клиентской частью
- Поддерживает JWT аутентификацию
- Включает валидацию данных и обработку ошибок
- Предоставляет расширенную статистику по статьям и пользователям

## Структура проекта

### Корневая директория

```
/
├── Client/           # Фронтенд-приложение (React + TypeScript)
├── Server/           # Бэкенд-приложение (Node.js + Express)
├── .gitignore        # Игнорируемые Git-файлы
└── README.md         # Документация проекта
```

### Клиентская часть (Client)

```
Client/
├── src/              # Исходный код приложения
│   ├── app/          # Основные настройки приложения
│   │   ├── store/    # Redux store и слайсы
│   │   │   ├── authSlice.ts      # Слайс аутентификации
│   │   │   ├── articlesSlice.ts  # Слайс статей
│   │   │   └── index.ts          # Корневой редьюсер
│   │   ├── providers/            # React провайдеры
│   │   │   ├── AppProvider.tsx   # Основной провайдер
│   │   │   └── ThemeProvider.tsx # Провайдер темы
│   │   └── routes/               # Маршрутизация
│   │       ├── AppRouter.tsx     # Основной роутер
│   │       └── routes.ts         # Конфигурация маршрутов
│   │
│   ├── entities/     # Бизнес-сущности и модели данных
│   │   ├── article/  # Сущность статьи
│   │   │   ├── model/           # Модель статьи
│   │   │   │   ├── types.ts     # Типы данных
│   │   │   │   ├── api.ts       # API запросы
│   │   │   │   └── hooks.ts     # React хуки
│   │   │   └── ui/              # UI компоненты
│   │   │       └── ArticleCard.tsx # Карточка статьи
│   │   │
│   │   └── user/     # Сущность пользователя
│   │       ├── model/           # Модель пользователя
│   │       │   ├── types.ts     # Типы данных
│   │       │   ├── api.ts       # API запросы
│   │       │   └── hooks.ts     # React хуки
│   │       └── ui/              # UI компоненты
│   │           └── UserInfo.tsx # Информация о пользователе
│   │
│   ├── features/     # Функциональные модули
│   │   ├── auth/     # Аутентификация
│   │   │   ├── components/      # Компоненты аутентификации
│   │   │   └── schemas/         # Схемы валидации
│   │   ├── theme/    # Темы оформления
│   │   │   ├── theme.ts         # Конфигурация темы
│   │   │   └── types.ts         # Типы темы
│   │   └── modals/   # Модальные окна
│   │       └── components/      # Компоненты модальных окон
│   │
│   ├── pages/        # Компоненты страниц
│   │   ├── users/    # Страницы пользователей
│   │   │   ├── AllUsersPage.tsx    # Список пользователей
│   │   │   └── UserDetailsPage.tsx # Детали пользователя
│   │   ├── articles/ # Страницы статей
│   │   │   ├── AllArticlesPage.tsx    # Список статей
│   │   │   └── ArticleDetailsPage.tsx # Детали статьи
│   │   └── statistics/ # Страница статистики
│   │       └── StatisticsPage.tsx     # Статистика
│   │
│   ├── shared/       # Общие компоненты и утилиты
│   │   ├── api/      # API-клиент
│   │   │   └── axios.ts        # Настройка Axios
│   │   ├── ui/       # Общие UI компоненты
│   │   │   ├── AppBreadcrumbs.tsx # Хлебные крошки
│   │   │   ├── ArticleImage.tsx   # Изображение статьи
│   │   │   ├── ErrorFetch.tsx     # Компонент ошибки
│   │   │   ├── Loader.tsx         # Индикатор загрузки
│   │   │   └── TitlePage.tsx      # Заголовок страницы
│   │   └── hooks/    # Общие хуки
│   │       └── useClampText.ts    # Хук для обрезки текста
│   │
│   ├── widgets/      # Составные компоненты
│   │   └── articles/ # Виджеты статей
│   │       └── ArticlesListRow.tsx # Строка списка статей
│   │
│   └── schemas/      # Схемы валидации
│       └── auth.ts   # Схема валидации аутентификации
│
├── public/           # Статические файлы
│   ├── index.html    # HTML шаблон
│   ├── favicon.ico   # Иконка сайта
│   └── assets/       # Статические ресурсы
│       └── images/   # Изображения
│
└── package.json      # Зависимости фронтенда
```

### Серверная часть (Server)

```
Server/
├── src/              # Исходный код сервера
│   ├── controllers/  # Контроллеры для обработки запросов
│   │   ├── auth.mjs      # Контроллер аутентификации
│   │   ├── articles.mjs  # Контроллер статей
│   │   ├── users.mjs     # Контроллер пользователей
│   │   └── root.mjs      # Корневой контроллер
│   │
│   ├── models/       # Модели данных
│   │   ├── users.mjs     # Модель пользователя
│   │   └── articles.mjs  # Модель статьи
│   │
│   ├── routes/       # Маршруты API
│   │   ├── auth.mjs      # Маршруты аутентификации
│   │   ├── articles.mjs  # Маршруты статей
│   │   ├── users.mjs     # Маршруты пользователей
│   │   └── index.mjs     # Основной роутер
│   │
│   ├── middlewares/  # Промежуточные обработчики
│   │   ├── validators/   # Валидаторы запросов
│   │   │   ├── validateRegisterUser.mjs # Валидация регистрации
│   │   │   └── validateLoginUser.mjs    # Валидация входа
│   │   ├── authentication.mjs # Проверка аутентификации
│   │   ├── errorHandler.mjs   # Обработка ошибок
│   │   └── logRequest.mjs     # Логирование запросов
│   │
│   ├── schemas/      # Схемы валидации
│   │   └── userSchema.mjs # Схема пользователя
│   │
│   ├── utils/        # Вспомогательные функции
│   │   ├── token.mjs     # Работа с JWT
│   │   ├── logger.mjs    # Логирование
│   │   └── dbHelpers.mjs # Помощники для работы с БД
│   │
│   ├── config/       # Конфигурационные файлы
│   │   ├── db.mjs        # Настройки базы данных
│   │   ├── cors.mjs      # Настройки CORS
│   │   └── token.config.mjs # Настройки JWT
│   │
│   └── app.mjs       # Основной файл приложения
│
└── package.json      # Зависимости бэкенда
```

### Feature-Sliced Design Архитектура

Feature-Sliced Design (FSD) - это методология организации кода, которая помогает создавать масштабируемые и поддерживаемые приложения. В нашем проекте FSD реализован следующим образом:

#### Слои архитектуры

1. **Shared (shared/)**

   - Переиспользуемые утилиты, компоненты и типы
   - Не зависит от других слоев
   - Примеры: UI компоненты, API клиент, хуки

2. **Entities (entities/)**

   - Бизнес-сущности приложения
   - Содержит модели данных и базовую логику
   - Примеры: User, Article

3. **Features (features/)**

   - Пользовательские сценарии и функциональность
   - Использует entities и shared слои
   - Примеры: Auth, Theme, Modals

4. **Widgets (widgets/)**

   - Составные компоненты, объединяющие несколько features
   - Использует features, entities и shared слои
   - Примеры: ArticlesListRow

5. **Pages (pages/)**
   - Страницы приложения
   - Использует все предыдущие слои
   - Примеры: AllUsersPage, ArticleDetailsPage

### Основные технологии

#### Фронтенд

- **Страница всех пользователей** (`AllUsersPage.tsx`)

  - Отображение списка всех пользователей
  - Навигация к детальной информации пользователя
  - Индикаторы загрузки и обработка ошибок

- **Страница деталей пользователя** (`UserDetailsPage.tsx`)

  - Отображение информации о пользователе
  - Список статей пользователя
  - Навигация по хлебным крошкам

- **Компонент информации о пользователе** (`UserInfo.tsx`)

  - Отображение имени и email пользователя

- **Хуки для работы с пользователями** (`hooks.ts`)

  - `useUsers` - получение списка пользователей
  - `useUserDetails` - получение детальной информации о пользователе
  - Обработка состояний загрузки и ошибок

- **API для работы с пользователями** (`api.ts`)
  - `getAllUser` - получение всех пользователей
  - `getUserDetails` - получение детальной информации о пользователе

#### Бэкенд

- **Модель пользователя** (`users.mjs`)

  - Схема пользователя с полями username, email, password
  - Хеширование паролей с использованием bcrypt
  - Методы для работы с пользователями:
    - `getAllUsers` - получение всех пользователей
    - `getUserById` - получение пользователя по ID

- **Контроллер пользователей** (`users.mjs`)
  - Обработка запросов для работы с пользователями
  - Получение списка пользователей
  - Получение информации о пользователе и его статьях

### Реализация базы данных

#### Модель пользователя (users.mjs)

- **Схема данных**:

  - `username`: String (обязательное поле)
  - `email`: String (обязательное поле, уникальное)
  - `password`: String (обязательное поле, хешируется перед сохранением)

- **Безопасность**:

  - Автоматическое хеширование паролей с использованием bcrypt
  - Соль для каждого пароля (10 раундов)
  - Хеширование происходит только при изменении пароля

- **Методы работы с данными**:
  - `getAllUsers()`: получение списка всех пользователей (только \_id и username)
  - `getUserById(userId)`: получение пользователя по ID (с username и email)

#### Модель статей (articles.mjs)

- **Схема данных**:

  - `title`: String (обязательное поле)
  - `content`: String (обязательное поле)
  - `img`: String (опциональное поле)
  - `author`: ObjectId (связь с моделью User)
  - Автоматические поля `createdAt` и `updatedAt`

- **Связи и индексы**:

  - Связь с моделью User через поле author
  - Автоматическая популяция данных автора при запросах

- **Методы работы с данными**:
  - `createArticle({ title, content, img, userID })`: создание новой статьи
  - `getArticleById(articleId)`: получение статьи по ID
  - `getAllArticles()`: получение всех статей с данными автора
  - `getArticlesByUserId(userId)`: получение статей конкретного пользователя
  - `getArticlesStats()`: получение статистики по статьям:
    - Общее количество статей
    - Средняя, минимальная и максимальная длина контента
    - Количество уникальных авторов
    - Даты первой и последней статьи

#### Оптимизация запросов

- Использование `populate()` для эффективной загрузки связанных данных
- Сортировка по дате создания (новые статьи первыми)
- Безопасные методы поиска с обработкой ошибок
- Агрегация данных для статистики на уровне базы данных

### Статистика и аналитика

#### Фронтенд

- **Страница статистики** (`StatisticsPage.tsx`)
  - Отображение общей статистики по статьям
  - Количество уникальных авторов
  - Статистика по длине контента
  - Даты первой и последней статьи

#### Бэкенд

- **Статистика статей** (`articles.mjs`)
  - Агрегация данных по статьям
  - Подсчет уникальных авторов
  - Расчет средней, минимальной и максимальной длины контента
  - Определение дат первой и последней статьи

### Улучшенное отображение статей

#### Фронтенд

- **Компонент списка статей** (`ArticlesListRow.tsx`)
  - Адаптивный дизайн для разных размеров экрана
  - Отображение изображений статей
  - Ограничение длины контента
  - Отображение даты создания
  - Навигация к детальной странице статьи

#### Бэкенд

- **Улучшенная модель статьи** (`articles.mjs`)
  - Связь с автором статьи
  - Методы для работы со статьями:
    - `createArticle` - создание новой статьи
    - `getArticleById` - получение статьи по ID
    - `getAllArticles` - получение всех статей
    - `getArticlesByUserId` - получение статей пользователя
    - `getArticlesStats` - получение статистики по статьям

## API Endpoints

### Аутентификация

```
POST /api/auth/register - Регистрация нового пользователя
POST /api/auth/login    - Вход в систему
GET  /api/auth/me       - Получение данных текущего пользователя
POST /api/auth/logout   - Выход из системы
```

### Пользователи

```
GET /api/users          - Получение списка пользователей
GET /api/users/:id      - Получение информации о пользователе и его статьях
```

### Статьи

```
GET    /api/articles        - Получение списка статей
POST   /api/articles        - Создание новой статьи
GET    /api/articles/:id    - Получение статьи по ID
GET    /api/articles/stats  - Получение статистики по статьям
```

## Установка и запуск

### Предварительные требования

- Node.js (версия 18 или выше)
- MongoDB (версия 5 или выше)
- npm или yarn
- Docker и Docker Compose (опционально, для запуска в контейнерах)

### Установка и запуск с Docker

1. Клонирование репозитория

```bash
git clone [url-репозитория]
```

2. Запуск с помощью Docker Compose

```bash
docker-compose up --build
```

Это запустит все необходимые сервисы:

- Клиентское приложение на порту 3000
- Серверное приложение на порту 5000
- MongoDB на порту 27017

Для остановки:

```bash
docker-compose down
```

### Установка и запуск без Docker

1. Клонирование репозитория

```bash
git clone [url-репозитория]
```

2. Установка зависимостей фронтенда

```bash
cd Client
npm install
```

3. Установка зависимостей бэкенда

```bash
cd Server
npm install
```

4. Настройка окружения
   Создайте файл `.env` в директории Server:

```
PORT=3000
MONGODB_URI=mongodb://localhost:27017/your_database
JWT_SECRET=your_secret_key
NODE_ENV=development
```

### Запуск приложения

1. Запуск MongoDB (если не используете Docker)

```bash
mongod
```

2. Запуск сервера

```bash
cd Server
npm run dev
```

3. Запуск клиента

```bash
cd Client
npm run dev
```

## Доступные команды

### Фронтенд

- `npm run dev` - Запуск сервера разработки
- `npm run build` - Сборка для продакшена

### Бэкенд

- `npm run dev` - Запуск сервера разработки с nodemon
- `npm start` - Запуск продакшен сервера

### Безопасное хранение данных

- **Пароли**

  - Хеширование с использованием bcrypt
  - Соль для каждого пароля
  - Минимальные требования к сложности
  - Защита от перебора

- **Чувствительные данные**
  - Шифрование данных
  - Безопасное хранение ключей

## Масштабируемость

- Модульная архитектура
- Чистый код
- Переиспользуемые компоненты
- Оптимизированная производительность
- Готовность к масштабированию
- Кэширование
- Оптимизация запросов к БД
- Микросервисная архитектура (готовность)

## Архитектура проекта

### Docker конфигурация

Проект настроен для работы в Docker-контейнерах с использованием Docker Compose. Конфигурация включает:

#### Сервисы

- **client** - React-приложение
  - Порт: 3000
  - Hot-reload включен
  - Volume для разработки
- **server** - Node.js сервер
  - Порт: 5000
  - Подключение к MongoDB
  - Volume для разработки
- **mongo** - База данных MongoDB
  - Порт: 27017
  - Persistent volume для данных

#### Особенности Docker-конфигурации

- Hot-reload для разработки
- Persistent storage для MongoDB
- Изолированные сети между сервисами
- Оптимизированные multi-stage сборки
- Готовность к production-деплою
